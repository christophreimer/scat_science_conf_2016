\documentclass[$if(structurecolor)$xcolor=svgnames,$endif$$if(fontsize)$$fontsize$,$endif$$if(beamer)$ignorenonframetext,$endif$$for(classoption)$$classoption$$sep$,$endfor$xcolor={dvipsnames, table}]{$documentclass$}

%\usepackage{amssymb,amsmath}
\usepackage{textcomp}
\usepackage{ifxetex,ifluatex}
\usepackage{fixltx2e} % provides \textsubscript
\frenchspacing % single space after a period

\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  $if(fontfamily)$
  \usepackage{$fontfamily$}
  $else$
  %\usepackage{mathpazo}
  $endif$
  % \usepackage{lmodern}
  % \usepackage[sfdefault,light,condensed]{roboto}
  \usepackage{PTSansNarrow} 
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  % \usepackage{mathpazo}
$if(euro)$
  \usepackage{eurosym}
$endif$
\else % if luatex or xelatex
  \usepackage{fontspec}
  \usepackage{realscripts}
  \usepackage{unicode-math}
  \unimathsetup{math-style=TeX}

$if(mathfont)$
  \setmathfont{$mathfont$}
$endif$
$if(mainfont)$
  \setmainfont{$mainfont$}
$endif$
$if(sansfont)$
  \setsansfont{$sansfont$}
$endif$
$if(monofont)$
  \setmonofont{$monofont$}
$endif$
\fi

$if(theme)$
\usetheme{$theme$}
$endif$

$if(colortheme)$
\usecolortheme{$colortheme$}
$else$
$if(structurecolor)$
\usecolortheme[named=$structurecolor$]{structure}
$endif$
$endif$

$if(outertheme)$
\useoutertheme{$outertheme$}
$else$
\setbeamertemplate{footline}[frame number]
$endif$

$if(innertheme)$
\useinnertheme{$innertheme$}
$endif$

$if(fonttheme)$
\usefonttheme{$fonttheme$}
$endif$


\setbeamertemplate{bibliography item}{}
\setbeamertemplate{caption}[numbered]
\setbeamertemplate{frametitle continuation}[from second]
\setbeamertemplate{blocks}[rounded][shadow=false]
\resetcounteronoverlays{exx}
\beamertemplatenavigationsymbolsempty
\setbeamercovered{transparent}

\setbeamercolor{title}{bg=RoyalBlue}
\setbeamercolor{frametitle}{fg=White,bg=RoyalBlue}
\setbeamercolor{section in head/foot}{bg=RoyalBlue}
\setbeamercolor{author in head/foot}{bg=RoyalBlue}
\setbeamercolor{title in head/foot}{bg=RoyalBlue}
\setbeamercolor{date in head/foot}{bg=RoyalBlue}

\setbeamercolor{block title}{bg=RoyalBlue}
\setbeamercolor{block body}{bg=RoyalBlue!10}
\setbeamercolor*{caption name}{fg=RoyalBlue}
\setbeamercolor*{item}{fg=RoyalBlue}
\setbeamercolor*{subitem}{fg=RoyalBlue}
\setbeamercolor*{enumerate item}{fg=Red}


% use upquote for straight quotes in verbatim environments
\usepackage{upquote}

% use microtype
\usepackage{microtype}

% use csquotes
\usepackage[style=british]{csquotes}

$if(natbib)$
\usepackage{natbib}
\bibliographystyle{$if(biblio-style)$$biblio-style$$else$plainnat$endif$}
$endif$

$if(biblatex)$
\usepackage[backend=biber,language=british,sortlocale=en-GB,bibstyle=authoryear,citestyle=authortitle-comp,sorting=nyt]{biblatex}
$if(biblio-files)$
$for(biblio-files)$
\addbibresource{$biblio-files$.bib}
$endfor$
$endif$
$endif$

$if(listings)$
\usepackage{listings}
$endif$

$if(lhs)$
\lstnewenvironment{code}{\lstset{language=Haskell,basicstyle=\small\ttfamily}}{}
$endif$

$if(highlighting-macros)$
$highlighting-macros$
$endif$

$if(verbatim-in-note)$
\usepackage{fancyvrb}
$endif$

\usepackage{caption}
\setbeamerfont{caption}{series=\itshape, size=\fontsize{6}{8}} 

$if(tables)$
\usepackage{longtable,booktabs}
% These lines are needed to make table captions work with longtable:
\makeatletter
\def\fnum@table{\tablename~\thetable}
\makeatother
$endif$

\usepackage{graphicx}
% \makeatletter
% \def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
% \def\maxheight{\ifdim\Gin@nat@height>\textheight0.8\textheight\else\Gin@nat@height\fi}
% \makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
% \setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}

\urlstyle{same}  % don't use monospace font for urls

\setbeamercolor{part title}{bg=RoyalBlue, fg=white}

%% \setbeamertemplate{section page}
%% {
%%     \begin{centering}
%%     \begin{beamercolorbox}[color=RoyalBlue,sep=12pt,center]{part title}
%%     \usebeamerfont{section title}\insertsection\par
%%     \end{beamercolorbox}
%%     \end{centering}
%% }

% Comment these out if you don't want a slide with just the
% part/section/subsection/subsubsection title:
\AtBeginPart{
  \let\insertpartnumber\relax
  \let\partname\relax
  \frame[noframenumbering,plain]{\partpage}
}
\AtBeginSection{
  \let\insertsectionnumber\relax
  \let\sectionname\relax
  \frame[noframenumbering,plain]{\sectionpage}
}
\AtBeginSubsection{
  \let\insertsubsectionnumber\relax
  \let\subsectionname\relax
  \frame[noframenumbering,plain]{\subsectionpage}
}

$if(strikeout)$
\usepackage[normalem]{ulem}
% avoid problems with \sout in headers with hyperref:
\pdfstringdefDisableCommands{\renewcommand{\sout}{}}
$endif$

$if(numbersections)$
$else$
\setcounter{secnumdepth}{0}
$endif$

$if(verbatim-in-note)$
\VerbatimFootnotes % allows verbatim text in footnotes
$endif$
\ifxetex
  \usepackage{polyglossia}
  \setmainlanguage[variant=british]{english}
\else
  \usepackage[british]{babel}
\fi

% can be removed if pandoc bug is resolved
\providecommand{\tightlist}{%
\setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}

$for(header-includes)$
$header-includes$
$endfor$

$if(title)$
$if(shorttitle)$
\title[$shorttitle$]{$title$}
$else$
\title{$title$}
$endif$
$endif$

$if(subtitle)$
\subtitle{$subtitle$}
$endif$

$if(author)$
\author{$for(author)$$author$$sep$ \and $endfor$}
$endif$

$if(affiliation)$
\institute{$affiliation$}
$endif$

$if(location)$
\subject{$location$}
$endif$

$if(date)$
\date{$date$}
$else$
\date{}
$endif$

$if(logo)$
\titlegraphic{\includegraphics{$logo$}}
$endif$

% Use Beamer's `\alert` for emphasis (but only for slides)
\mode<presentation>{\let\emph\alert}

% Give lines some space
\mode<presentation>{\linespread{1.2}}

% Use these cite commands to work with the style I've chosen
\let\autocite\parencite
\let\textcite\cite

\begin{document}
$for(include-before)$
$include-before$
$endfor$

\begin{frame}[plain]
\titlepage
\end{frame}

$if(toc)$
\begin{frame}[noframenumbering,plain]
\tableofcontents[hideallsubsections]
\end{frame}
$endif$

$body$

$if(end)$
\begin{frame}[c,noframenumbering,plain]
\begin{center}
\structure{The End}
\par
\hyperlinkpresentationstart{\beamergotobutton{Start}}
\end{center}
\end{frame}
$endif$

$if(contact)$
\begin{frame}[c,noframenumbering,plain]{Contact}
\centering
\textbf{$author$}
$if(affiliation)$
\par
$affiliation$
$endif$
$if(email)$
\par
\href{mailto:$email$}{\nolinkurl{$email$}}
$endif$
$if(url)$
\par
\href{http://$url$}{\nolinkurl{$url$}}
$endif$
$if(twitter)$
\par
\href{http://twitter.com/$twitter$}{@\nolinkurl{$twitter$}}
$endif$
\end{frame}
$endif$

$if(natbib)$
$if(biblio-files)$
$if(biblio-title)$
$if(book-class)$
\renewcommand\bibname{$biblio-title$}
$else$
\renewcommand\refname{$biblio-title$}
$endif$
$endif$
\begin{frame}[allowframebreaks]{$biblio-title$}
\bibliography{$biblio-files$}
\end{frame}
$endif$
$endif$
$if(biblatex)$
\begin{frame}[allowframebreaks,noframenumbering,plain]{$if(biblio-title)$$biblio-title$$else$References$endif$}
\let\emph\textit
\printbibliography[heading=none]
\end{frame}
$endif$

$for(include-after)$
$include-after$
$endfor$

\end{document}
